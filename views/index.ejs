<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.1.1.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA=" crossorigin="anonymous"></script>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <div class="container">
      <h1 style="margin-bottom: 20px;"><%= title %></h1>

      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Name</th>
            <th>Position</th>
            <th>Office</th>
            <th>Age</th>
            <th>Start Date</th>
            <th>Salary</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>

      <hr>
      <br>

      <form id="datatable_form" method="post">
        <div class="col-md-6">
          <div class="form-group">
            <label for="data">Name: </label>
            <input type="text" class="form-control" name="name" id="data" required>
          </div>
          <div class="form-group">
            <label for="position">Position: </label>
            <input type="text" class="form-control" name="position" id="position" required>
          </div>
          <div class="form-group">
            <label for="office">Office: </label>
            <input type="text" class="form-control" name="office" id="office" required>
          </div>
          <div class="form-group">
            <label for="age">Age: </label>
            <input type="text" class="form-control" name="age" id="age" required>
          </div>
          <div class="form-group">
            <label for="salary">Salary: </label>
            <input type="text" class="form-control" name="salary" id="salary" required>
          </div>
          <button type="submit" class="btn btn-success">Add Data</button>
        </div>
      </form>

      <script>
      $("#datatable_form").submit(function(e){
        e.preventDefault();
        let inputName = $("input[name=name]").val();
        let inputPosition = $("input[name=position]").val();
        let inputOffice = $("input[name=office]").val();
        let inputAge = $("input[name=age]").val();
        let inputSalary = $("input[name=salary]").val();
        console.log(name, position, office, age, salary);

        $.ajax({
        method: "POST",
        url: "/api/users/add",
        data: {
          name: inputName,
          position: inputPosition,
          office: inputOffice,
          age: inputAge,
          salary: inputSalary
        },
        dataType: "json"
        })
        .done(function(data) {
          addTable(data)
        });
        return false;
        })

        function addTable(data){
          let html = ""
          html += `<tr>`
          html += `<td>${data.name}</td>`
          html += `<td>${data.position}</td>`
          html += `<td>${data.completed}</td>`
          html += `</tr>`
          $("#todos-table tbody").append(html)
        }
      });
      </script>
    </div>

  </body>
</html>
